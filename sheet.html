<div class="tabs">
    <button type="action" name="act_creation" >Creation</button>
    <button type="action" name="act_character" >Character</button>
    <button type="action" name="act_perks" >Perks</button>
</div>
<input type="hidden" class="tabstoggle" name="attr_tab" value='creation'  />


<!-- start creation page -->
<div class="creation">
    <div class="row">
        <div class="column">
            <h1>Character Creation</h1>

            <details open="true">
                <summary><h2>1. Choose your Origin</h2></summary>

                <label>Origin</label>
                <select id="origin" name="attr_origin" class="origin">
                    <option value="">Choose</option>
                    <option value="brotherhood">Brotherhood of Steel</option>
                    <option value="ghoul">Ghoul</option>
                    <option value="mutant">Super Mutant</option>
                    <option value="robot">Mister Handy</option>
                    <option value="survivor">Survivor</option>
                    <option value="vault">Vault Dweller</option>
                </select>

                <input type="hidden" id="origin-choice" name="attr_origin_choice"
                    class="origin-choice" value="" />

                <!-- start origin panels -->
                <div class="origin-brotherhood">
                    <h3>The Chain that Binds</h3>
                    <p>You gain one additional Tag skill, which must be one of Energy
                        Weapons, Science, or Repair.</p>

                    <label>Tag skill</label>
                    <select id="brotherhood-tag" name="attr_brotherhood_tag">
                        <option value="">Choose</option>
                        <option value="energy_weapons">Energy Weapons</option>
                        <option value="science">Science</option>
                        <option value="repair">Repair</option>
                    </select>

                    <p>As a member of the Brotherhood of Steel, you are bound by the
                        chain of command: The Chain that Binds. You must carry out the
                        orders of your immediate superiors, and you are responsible for
                        your subordinate siblings. If you do not carry out your duty,
                        you are expelled from the Brotherhood and your technology will
                        be reclaimed—by any means necessary.</p>
                </div>

                <div class="origin-ghoul">
                    <h3>Necrotic Post-Human</h3>
                    <p>You are immune to radiation damage. In fact, you’re healed
                        by it—you regain 1 HP for every 3 points of radiation
                        damage inflicted upon you, and if you rest in an irradiated
                        location, you may re-roll your dice pool when checking if
                        your injuries heal. In addition, Survival becomes a Tag
                        skill, increasing it by 2 ranks.</p>
                    <p>You age at a much-decreased rate, and you’re probably older
                        than your unmutated companions—you may even have survived
                        the Great War of 2077—but you’re sterile: “the first
                        generation of ghouls is the last” as the saying goes.
                        You may face discrimination from “smoothskins” (humans
                        who aren’t ghouls), increasing the difficulty or
                        complication range of Charisma tests depending on your
                        opponent’s beliefs.</p>
                </div>
                <div class="origin-mutant">
                    <h3>Forced Evolution</h3>
                    <p>Your initial Strength and Endurance attributes are increased
                        by +2 each, and your maximum Strength and Endurance are
                        increased to 12, but your maximum Intelligence and
                        Charisma are both reduced to 6. You may not have more
                        than 4 ranks in any skill. You are completely immune to
                        radiation and poison damage.</p>
                    <p>You stand over seven feet tall, and your body is bulky and
                        muscular. Your skin is green, yellow, or grey, regardless
                        of what color it was when you were human. You do not seem
                        to age, but you are sterile.</p>
                    <p>You can only wear armor which has been made to fit a super
                        mutant.</p>
                </div>
                <div class="origin-robot">
                    <h3>Mister Handy Robot</h3>
                    <p>You have 360° vision and improved sensory systems that
                        can detect smells, chemicals, and radiation, reducing
                        the difficulty of Perception tests that rely on sight
                        and smell by 1. You are also immune to radiation and
                        poison damage, but you cannot use chems, nor can you
                        benefit from food, drink, or rest. You move by jet
                        propulsion, hovering above the ground, unaffected by
                        difficult terrain or obstacles. Your carry weight is
                        150 lbs., and it cannot be increased by your Strength
                        or perks, but it can be increased by modi- fied armor.
                        You cannot recover from your own injuries or heal
                        health points without receiving repairs (see
                        <i>Healing Robots</i>, p.34).</p>
                    <p>You cannot manipulate the physical world like humans do,
                        instead you have three of the arm attachments in the
                        <i>Arm Attachments</i> table, determined by your choice
                        of equipment pack. If you select an arm that features a
                        weapon, you also gain 20 shots of ammo for that
                        weapon.</p>
                </div>
                <div class="origin-survivor">
                    <p>You may choose two of the following traits, or one trait
                        and one additional perk. Each trait has a benefit and
                        may have an accompanying penalty.</p>

                    <label>Trait</label>
                    <select id="survivor-trait" name="attr_survivor_trait">
                        <option value="">Choose</option>
                        <option value="educated">Educated</option>
                        <option value="fast_shot">Fast Shot</option>
                        <option value="gifted">Gifted</option>
                        <option value="heavy_handed">Heavy Handed</option>
                        <option value="small_frame">Small Frame</option>
                    </select>
                </div>
                <div class="origin-vault">
                    <h3>Vault Kid</h3>
                    <p>Your healthier start to life at the hands of trained
                        doctors and sophisticated auto-docs means you reduce
                        the difficulty of all END tests to resist the effects
                        of disease. In addition, your carefully-planned
                        upbringing means you have one additional tag skill of
                        your choice.

                    <label>Tag skill</label>
                    <select id="vault-tag" name="attr_vault_tag">
                        <option value="">Choose</option>
                        <option value="athletics">Athletics</option>
                        <option value="barter">Barter</option>
                        <option value="big_guns">Big Guns</option>
                        <option value="energy_weapons">Energy Weapons</option>
                        <option value="explosives">Explosives</option>
                        <option value="lockpick">Lockpick</option>
                        <option value="medicine">Medicine</option>
                        <option value="melee_weapons">Melee Weapons</option>
                        <option value="pilot">Pilot</option>
                        <option value="repair">Repair</option>
                        <option value="science">Science</option>
                        <option value="small_guns">Small Guns</option>
                        <option value="sneak">Sneak</option>
                        <option value="speech">Speech</option>
                        <option value="survival">Survival</option>
                        <option value="throwing">Throwing</option>
                        <option value="unarmed">Unarmed</option>
                    </select>

                    <p>You may also work with the Gamemaster to determine what
                        sort of experiment took place within your Vault. Once
                        per quest, the GM may introduce a complication which
                        reflects the nature of the experiment you unwittingly
                        took part in, or introduce a complication related to
                        your early life of isola- tion and confinement within
                        the Vault. If the GM does this, you immediately regain
                        one Luck Point.</p>
                </div>
                <!-- end origin panels -->

            </details>

            <details open="true">
                <summary><h2>2. Increase S.P.E.C.I.A.L. attributes</h2></summary>

                <p>
                    <label>Attribute Points</label>
                    <input type="hidden" name="attr_attribute_points"
                        value='5' />
                    <span class="input" name="attr_attribute_points"></span>
                </p>
                <p class="strength">
                    <label>Strength</label>
                    <input type="hidden" class="attribute-value"
                        name="attr_strength" value='5'  />
                    <button type="action" name="act_strength4"
                        class="value-4">4</button>
                    <button type="action" name="act_strength5"
                        class="value-5">5</button>
                    <button type="action" name="act_strength6"
                        class="value-6">6</button>
                    <button type="action" name="act_strength7"
                        class="value-7">7</button>
                    <button type="action" name="act_strength8"
                        class="value-8">8</button>
                    <button type="action" name="act_strength9"
                        class="value-9">9</button>
                    <button type="action" name="act_strength10"
                        class="value-10">10</button>
                </p>
                <p class="perception">
                    <label>Perception</label>
                    <input type="hidden" class="attribute-value"
                        name="attr_perception" value='5'  />
                    <button type="action" name="act_perception4"
                        class="value-4">4</button>
                    <button type="action" name="act_perception5"
                        class="value-5">5</button>
                    <button type="action" name="act_perception6"
                        class="value-6">6</button>
                    <button type="action" name="act_perception7"
                        class="value-7">7</button>
                    <button type="action" name="act_perception8"
                        class="value-8">8</button>
                    <button type="action" name="act_perception9"
                        class="value-9">9</button>
                    <button type="action" name="act_perception10"
                        class="value-10">10</button>
                </p>
                <p class="endurance">
                    <label>Endurance</label>
                    <input type="hidden" class="attribute-value"
                        name="attr_endurance" value='5'  />
                    <button type="action" name="act_endurance4"
                        class="value-4">4</button>
                    <button type="action" name="act_endurance5"
                        class="value-5">5</button>
                    <button type="action" name="act_endurance6"
                        class="value-6">6</button>
                    <button type="action" name="act_endurance7"
                        class="value-7">7</button>
                    <button type="action" name="act_endurance8"
                        class="value-8">8</button>
                    <button type="action" name="act_endurance9"
                        class="value-9">9</button>
                    <button type="action" name="act_endurance10"
                        class="value-10">10</button>
                </p>
                <p class="charisma">
                    <label>Charisma</label>
                    <input type="hidden" class="attribute-value"
                        name="attr_charisma" value='5'  />
                    <button type="action" name="act_charisma4"
                        class="value-4">4</button>
                    <button type="action" name="act_charisma5"
                        class="value-5">5</button>
                    <button type="action" name="act_charisma6"
                        class="value-6">6</button>
                    <button type="action" name="act_charisma7"
                        class="value-7">7</button>
                    <button type="action" name="act_charisma8"
                        class="value-8">8</button>
                    <button type="action" name="act_charisma9"
                        class="value-9">9</button>
                    <button type="action" name="act_charisma10"
                        class="value-10">10</button>
                </p>
                <p class="intelligence">
                    <label>Intelligence</label>
                    <input type="hidden" class="attribute-value"
                        name="attr_intelligence" value='5'  />
                    <button type="action" name="act_intelligence4"
                        class="value-4">4</button>
                    <button type="action" name="act_intelligence5"
                        class="value-5">5</button>
                    <button type="action" name="act_intelligence6"
                        class="value-6">6</button>
                    <button type="action" name="act_intelligence7"
                        class="value-7">7</button>
                    <button type="action" name="act_intelligence8"
                        class="value-8">8</button>
                    <button type="action" name="act_intelligence9"
                        class="value-9">9</button>
                    <button type="action" name="act_intelligence10"
                        class="value-10">10</button>
                </p>
                <p class="agility">
                    <label>Agility</label>
                    <input type="hidden" class="attribute-value"
                        name="attr_agility" value='5'  />
                    <button type="action" name="act_agility4"
                        class="value-4">4</button>
                    <button type="action" name="act_agility5"
                        class="value-5">5</button>
                    <button type="action" name="act_agility6"
                        class="value-6">6</button>
                    <button type="action" name="act_agility7"
                        class="value-7">7</button>
                    <button type="action" name="act_agility8"
                        class="value-8">8</button>
                    <button type="action" name="act_agility9"
                        class="value-9">9</button>
                    <button type="action" name="act_agility10"
                        class="value-10">10</button>
                </p>
                <p class="luck">
                    <label>Luck</label>
                    <input type="hidden" class="attribute-value"
                        name="attr_luck" value='5'  />
                    <button type="action" name="act_luck4"
                        class="value-4">4</button>
                    <button type="action" name="act_luck5"
                        class="value-5">5</button>
                    <button type="action" name="act_luck6"
                        class="value-6">6</button>
                    <button type="action" name="act_luck7"
                        class="value-7">7</button>
                    <button type="action" name="act_luck8"
                        class="value-8">8</button>
                    <button type="action" name="act_luck9"
                        class="value-9">9</button>
                    <button type="action" name="act_luck10"
                        class="value-10">10</button>
                </p>
            </details>

            <details open="true">
                <summary><h2>3. Tag skills and buying skill ranks</h2></summary>

                <div class="row col2">
                    <div class="column">
                        <p>
                            <label>Tag skill</label>
                            <select id="skills-tag1" name="attr_skills_tag1">
                                <option value="">Choose</option>
                                <option value="athletics">Athletics</option>
                                <option value="barter">Barter</option>
                                <option value="big_guns">Big Guns</option>
                                <option value="energy_weapons">Energy Weapons</option>
                                <option value="explosives">Explosives</option>
                                <option value="lockpick">Lockpick</option>
                                <option value="medicine">Medicine</option>
                                <option value="melee_weapons">Melee Weapons</option>
                                <option value="pilot">Pilot</option>
                                <option value="repair">Repair</option>
                                <option value="science">Science</option>
                                <option value="small_guns">Small Guns</option>
                                <option value="sneak">Sneak</option>
                                <option value="speech">Speech</option>
                                <option value="survival">Survival</option>
                                <option value="throwing">Throwing</option>
                                <option value="unarmed">Unarmed</option>
                            </select>
                        </p>

                        <p>
                            <label>Tag skill</label>
                            <select id="skills-tag2" name="attr_skills_tag2">
                                <option value="">Choose</option>
                                <option value="athletics">Athletics</option>
                                <option value="barter">Barter</option>
                                <option value="big_guns">Big Guns</option>
                                <option value="energy_weapons">Energy Weapons</option>
                                <option value="explosives">Explosives</option>
                                <option value="lockpick">Lockpick</option>
                                <option value="medicine">Medicine</option>
                                <option value="melee_weapons">Melee Weapons</option>
                                <option value="pilot">Pilot</option>
                                <option value="repair">Repair</option>
                                <option value="science">Science</option>
                                <option value="small_guns">Small Guns</option>
                                <option value="sneak">Sneak</option>
                                <option value="speech">Speech</option>
                                <option value="survival">Survival</option>
                                <option value="throwing">Throwing</option>
                                <option value="unarmed">Unarmed</option>
                            </select>
                        </p>

                        <p>
                            <label>Tag skill</label>
                            <select id="skills-tag3" name="attr_skills_tag3">
                                <option value="">Choose</option>
                                <option value="athletics">Athletics</option>
                                <option value="barter">Barter</option>
                                <option value="big_guns">Big Guns</option>
                                <option value="energy_weapons">Energy Weapons</option>
                                <option value="explosives">Explosives</option>
                                <option value="lockpick">Lockpick</option>
                                <option value="medicine">Medicine</option>
                                <option value="melee_weapons">Melee Weapons</option>
                                <option value="pilot">Pilot</option>
                                <option value="repair">Repair</option>
                                <option value="science">Science</option>
                                <option value="small_guns">Small Guns</option>
                                <option value="sneak">Sneak</option>
                                <option value="speech">Speech</option>
                                <option value="survival">Survival</option>
                                <option value="throwing">Throwing</option>
                                <option value="unarmed">Unarmed</option>
                            </select>
                        </p>
                        <p>
                            <label>Skill Points</label>
                            <input type="hidden" name="attr_skill_points"
                                value='5' />
                            <span class="input" name="attr_skill_points"></span>
                        </p>
                    </div>
                    <div class="column">
                        <table class="skills">
                            <tr>
                                <th>Name</th>
                                <th>Tag</th>
                                <th>Points</th>
                                <th>Rank</th>
                            </tr>
                            <tr>
                                <td><label>Athletics</label> [STR]</td>
                                <td><input type="hidden" id="athletics-tag"
                                    name="attr_athletics_tag" value=""
                                    class="tag-skill" />
                                    <span class="tag">yes</span></td>
                                <td><input type="number" id="athletics"
                                    name="attr_athletics" value="" min="0"
                                    max="6" /></td>
                                <td><input type="hidden" id="athletics-total"
                                    name="attr_athletics_total" value="" />
                                    <span name="attr_athletics_total"></span></td>
                            </tr>
                            <tr>
                                <td><label>Barter</label> [CHA]</td>
                                <td><input type="hidden" id="barter-tag"
                                    name="attr_barter_tag" value=""
                                    class="tag-skill" />
                                    <span class="tag">yes</span></td>
                                <td><input type="number" id="barter"
                                    name="attr_barter" value="" min="0"
                                    max="6" /></td>
                                <td><input type="hidden" id="barter-total"
                                    name="attr_barter_total" value="" />
                                    <span name="attr_barter_total"></span></td>
                            </tr>
                            <tr>
                                <td><label>Big Guns</label> [END]</td>
                                <td><input type="hidden" id="big-guns-tag"
                                    name="attr_big_guns_tag" value=""
                                    class="tag-skill" />
                                    <span class="tag">yes</span></td>
                                <td><input type="number" id="big-guns"
                                    name="attr_big_guns" value="" min="0"
                                    max="6" /></td>
                                <td><input type="hidden" id="big-guns-total"
                                    name="attr_big_guns_total" value="" />
                                    <span name="attr_big_guns_total"></span></td>
                            </tr>
                            <tr>
                                <td><label>Energy Weapons</label> [PER]</td>
                                <td><input type="hidden" id="energy-weapons-tag"
                                    name="attr_energy_weapons_tag" value=""
                                    class="tag-skill" />
                                    <span class="tag">yes</span></td>
                                <td><input type="number" id="energy-weapons"
                                    name="attr_energy_weapons" value="" min="0"
                                    max="6" /></td>
                                <td><input type="hidden" id="energy-weapons-total"
                                    name="attr_energy_weapons_total" value="" />
                                    <span name="attr_energy_weapons_total"></span></td>
                            </tr>
                            <tr>
                                <td><label>Explosives</label> [PER]</td>
                                <td><input type="hidden" id="explosives-tag"
                                    name="attr_explosives_tag" value=""
                                    class="tag-skill" />
                                    <span class="tag">yes</span></td>
                                <td><input type="number" id="explosives"
                                    name="attr_explosives" value="" min="0"
                                    max="6" /></td>
                                <td><input type="hidden" id="explosives-total"
                                    name="attr_explosives_total" value="" />
                                    <span name="attr_explosives_total"></span></td>
                            </tr>
                            <tr>
                                <td><label>Lockpick</label> [PER]</td>
                                <td><input type="hidden" id="lockpick-tag"
                                    name="attr_lockpick_tag" value=""
                                    class="tag-skill" />
                                    <span class="tag">yes</span></td>
                                <td><input type="number" id="lockpick"
                                    name="attr_lockpick" value="" min="0"
                                    max="6" /></td>
                                <td><input type="hidden" id="lockpick-total"
                                    name="attr_lockpick_total" value="" />
                                    <span name="attr_lockpick_total"></span></td>
                            </tr>
                            <tr>
                                <td><label>Medicine</label> [INT]</td>
                                <td><input type="hidden" id="medicine-tag"
                                    name="attr_medicine_tag" value=""
                                    class="tag-skill" />
                                    <span class="tag">yes</span></td>
                                <td><input type="number" id="medicine"
                                    name="attr_medicine" value="" min="0"
                                    max="6" /></td>
                                <td><input type="hidden" id="medicine-total"
                                    name="attr_medicine_total" value="" />
                                    <span name="attr_medicine_total"></span></td>
                            </tr>
                            <tr>
                                <td><label>Melee Weapons</label> [STR]</td>
                                <td><input type="hidden" id="melee-weapons-tag"
                                    name="attr_melee_weapons_tag" value=""
                                    class="tag-skill" />
                                    <span class="tag">yes</span></td>
                                <td><input type="number" id="melee-weapons"
                                    name="attr_melee_weapons" value="" min="0"
                                    max="6" /></td>
                                <td><input type="hidden" id="melee-weapons-total"
                                    name="attr_melee_weapons_total" value="" />
                                    <span name="attr_melee_weapons_total"></span></td>
                            </tr>
                            <tr>
                                <td><label>Pilot</label> [PER]</td>
                                <td><input type="hidden" id="pilot-tag"
                                    name="attr_pilot_tag" value=""
                                    class="tag-skill" />
                                    <span class="tag">yes</span></td>
                                <td><input type="number" id="pilot"
                                    name="attr_pilot" value="" min="0"
                                    max="6" /></td>
                                <td><input type="hidden" id="pilot-total"
                                    name="attr_pilot_total" value="" />
                                    <span name="attr_pilot_total"></span></td>
                            </tr>
                            <tr>
                                <td><label>Repair</label> [INT]</td>
                                <td><input type="hidden" id="repair-tag"
                                    name="attr_repair_tag" value=""
                                    class="tag-skill" />
                                    <span class="tag">yes</span></td>
                                <td><input type="number" id="repair"
                                    name="attr_repair" value="" min="0"
                                    max="6" /></td>
                                <td><input type="hidden" id="repair-total"
                                    name="attr_repair_total" value="" />
                                    <span name="attr_repair_total"></span></td>
                            </tr>
                            <tr>
                                <td><label>Science</label> [INT]</td>
                                <td><input type="hidden" id="science-tag"
                                    name="attr_science_tag" value=""
                                    class="tag-skill" />
                                    <span class="tag">yes</span></td>
                                <td><input type="number" id="science"
                                    name="attr_science" value="" min="0"
                                    max="6" /></td>
                                <td><input type="hidden" id="science-total"
                                    name="attr_science_total" value="" />
                                    <span name="attr_science_total"></span></td>
                            </tr>
                            <tr>
                                <td><label>Small Guns</label> [AGI]</td>
                                <td><input type="hidden" id="small-guns-tag"
                                    name="attr_small_guns_tag" value=""
                                    class="tag-skill" />
                                    <span class="tag">yes</span></td>
                                <td><input type="number" id="small-guns"
                                    name="attr_small_guns" value="" min="0"
                                    max="6" /></td>
                                <td><input type="hidden" id="small-guns-total"
                                    name="attr_small_guns_total" value="" />
                                    <span name="attr_small_guns_total"></span></td>
                            </tr>
                            <tr>
                                <td><label>Sneak</label> [AGI]</td>
                                <td><input type="hidden" id="=sneak-tag"
                                    name="attr_sneak_tag" value=""
                                    class="tag-skill" />
                                    <span class="tag">yes</span></td>
                                <td><input type="number" id="sneak"
                                    name="attr_sneak" value="" min="0"
                                    max="6" /></td>
                                <td><input type="hidden" id="sneak-total"
                                    name="attr_sneak_total" value="" />
                                    <span name="attr_sneak_total"></span></td>
                            </tr>
                            <tr>
                                <td><label>Speech</label> [CHA]</td>
                                <td><input type="hidden" id="speech-tag"
                                    name="attr_speech_tag" value=""
                                    class="tag-skill" />
                                    <span class="tag">yes</span></td>
                                <td><input type="number" id="speech"
                                    name="attr_speech" value="" min="0"
                                    max="6" /></td>
                                <td><input type="hidden" id="speech-total"
                                    name="attr_speech_total" value="" />
                                    <span name="attr_speech_total"></span></td>
                            </tr>
                            <tr>
                                <td><label>Survival</label> [END]</td>
                                <td><input type="hidden" id="survival-tag"
                                    name="attr_survival_tag" value=""
                                    class="tag-skill" />
                                    <span class="tag">yes</span></td>
                                <td><input type="number" id="survival"
                                    name="attr_survival" value="" min="0"
                                    max="6" /></td>
                                <td><input type="hidden" id="survival-total"
                                    name="attr_survival_total" value="" />
                                    <span name="attr_survival_total"></span></td>
                            </tr>
                            <tr>
                                <td><label>Throwing</label> [AGI]</td>
                                <td><input type="hidden" id="throwing-tag"
                                    name="attr_throwing_tag" value=""
                                    class="tag-skill" />
                                    <span class="tag">yes</span></td>
                                <td><input type="number" id="throwing"
                                    name="attr_throwing" value="" min="0"
                                    max="6" /></td>
                                <td><input type="hidden" id="throwing-total"
                                    name="attr_athrowing_total" value="" />
                                    <span name="attr_throwing_total"></span></td>
                            </tr>
                            <tr>
                                <td><label>Unarmed</label> [STR]</td>
                                <td><input type="hidden" id="unarmed-tag"
                                    name="attr_unarmed_tag" value=""
                                    class="tag-skill" />
                                    <span class="tag">yes</span></td>
                                <td><input type="number" id="unarmed"
                                    name="attr_unarmed" value="" min="0"
                                    max="6" /></td>
                                <td><input type="hidden" id="unarmed-total"
                                    name="attr_unarmed_total" value="" />
                                    <span name="attr_unarmed_total"></span></td>
                            </tr>
                        </table>
                    </div>
                </div>
            </details>

            <details open="true">
                <summary><h2>4. Choose your first perk</h2></summary>

                <label>Perk</label>
                <select id="perks-starting" name="attr_perks_starting">
                    <option value="">Choose</option>
                    <option value="action_boy_girl">Action Boy/Girl</option>
                    <option value="adamantine_skeleton">Adamantine Skeleton</option>
                    <option value="adrenalin_rush">Adrenalin Rush</option>
                    <option value="animal_friend">Animal Friend</option>
                    <option value="aquaboy_aquagirl">Aquaboy/Aquagirl</option>
                    <option value="armorer">Armorer</option>
                    <option value="awareness">Awareness</option>
                    <option value="barbarian">Barbarian</option>
                    <option value="basher">Basher</option>
                    <option value="better_criticals">Better Criticals</option>
                    <option value="big_leagues">Big Leagues</option>
                    <option value="black_widow_lady_killer">Black Widow/Lady Killer</option>
                    <option value="blacksmith">Blacksmith</option>
                    <option value="blitz">Blitz</option>
                    <option value="bloody_mess">Bloody Mess</option>
                    <option value="can_do">Can Do!</option>
                    <option value="cap_collector">Cap Collector</option>
                    <option value="cautious_nature">Cautious Nature</option>
                    <option value="center_mass">Center Mass</option>
                    <option value="chem_resistant">Chem Resistant</option>
                    <option value="chemist">Chemist</option>
                    <option value="commando">Commando</option>
                    <option value="comprehension">Comprehension</option>
                    <option value="concentrated_fire">Concentrated Fire</option>
                    <option value="daring_nature">Daring Nature</option>
                    <option value="demolition_expert">Demolition Expert</option>
                    <option value="dodger">Dodger</option>
                    <option value="dogmeat">Dogmeat</option>
                    <option value="entomologist">Entomologist</option>
                    <option value="fast_metabolism">Fast Metabolism</option>
                    <option value="faster_healing">Faster Healing</option>
                    <option value="finesse">Finesse</option>
                    <option value="fortune_finder">Fortune Finder</option>
                    <option value="ghost">Ghost</option>
                    <option value="grim_reapers_sprint">Grim Reaper's Sprint</option>
                    <option value="gun_fu">Gun Fu</option>
                    <option value="gun_nut">Gun Nut</option>
                    <option value="gunslinger">Gunslinger</option>
                    <option value="hacker">Hacker</option>
                    <option value="healer">Healer</option>
                    <option value="heave_ho">Heave Ho!</option>
                    <option value="hunter">Hunter</option>
                    <option value="infiltrator">Infiltrator</option>
                    <option value="inspirational">Inspirational</option>
                    <option value="intense_training">Intense Training</option>
                    <option value="iron_fist">Iron Fist</option>
                    <option value="junktown_jerky_vendor">Junktown Jerky Vendor</option>
                    <option value="jury_rigging">Jury Rigging</option>
                    <option value="laser_commander">Laser Commander</option>
                    <option value="lead_belly">Lead Belly</option>
                    <option value="life_giver">Life Giver</option>
                    <option value="light_step">Light Step</option>
                    <option value="master_thief">Master Thief</option>
                    <option value="medic">Medic</option>
                    <option value="meltdown">Meltdown</option>
                    <option value="mister_sandman">Mister Sandman</option>
                    <option value="moving_target">Moving Target</option>
                    <option value="mysterious_stranger">Mysterious Stranger</option>
                    <option value="nerd_rage">Nerd Rage</option>
                    <option value="night_person">Night Person</option>
                    <option value="ninja">Ninja</option>
                    <option value="nuclear_physicist">Nuclear Physicist</option>
                    <option value="pain_train">Pain Train</option>
                    <option value="paralyzing_palm">Paralyzing Palm</option>
                    <option value="party_boy_party_girl">Party Boy/Party Girl</option>
                    <option value="pathfinder">Pathfinder</option>
                    <option value="pharma_farma">Pharma Farma</option>
                    <option value="pickpocket">Pickpocket</option>
                    <option value="piercing_strike">Piercing Strike</option>
                    <option value="pyromaniac">Pyromaniac</option>
                    <option value="quick_draw">Quick Draw</option>
                    <option value="quick_hands">Quick Hands</option>
                    <option value="rad_resistance">Rad Resistance</option>
                    <option value="refractor">Refractor</option>
                    <option value="ricochet">Ricochet</option>
                    <option value="rifleman">Rifleman</option>
                    <option value="robotics_expert">Robotics Expert</option>
                    <option value="science">Science!</option>
                    <option value="scoundrel">Scoundrel</option>
                    <option value="scrapper">Scrapper</option>
                    <option value="scrounger">Scrounger</option>
                    <option value="shotgun_surgeon">Shotgun Surgeon</option>
                    <option value="skilled">Skilled</option>
                    <option value="size_matters">Size Matters</option>
                    <option value="slayer">Slayer</option>
                    <option value="smooth_talker">Smooth Talker</option>
                    <option value="snakeater">Snakeater</option>
                    <option value="sniper">Sniper</option>
                    <option value="solar_powered">Solar Powered</option>
                    <option value="steady_aim">Steady Aim</option>
                    <option value="strong_back">Strong Back</option>
                    <option value="tag">Tag!</option>
                    <option value="terrifying_presence">Terrifying Presence</option>
                    <option value="toughness">Toughness</option>
                </select>
            </details>

            <details open="true">
                <summary><h2>5. Derived statistics</h2></summary>

                <div class="row col2">
                    <div class="column">
                        <p>
                            <label>Carry Weight (lbs.)</label>
                            <input type="hidden" name="attr_carry_weight"
                                value='200' />
                            <span class="input" name="attr_carry_weight"></span>
                        </p>
                        <p>
                            <label>Base Physical Damage Resistance</label>
                            <input type="hidden" name="attr_base_physical_dr"
                                value='0' />
                            <span class="input" name="attr_base_physical_dr"></span>
                        </p>
                        <p>
                            <label>Base Energy Damage Resistance</label>
                            <input type="hidden" name="attr_base_energy_dr"
                                value='0' />
                            <span class="input" name="attr_base_energy_dr"></span>
                        </p>
                        <p>
                            <label>Radiation Damage Resistance</label>
                            <input type="hidden" name="attr_base_rad_dr"
                                value='0' />
                            <span class="input" name="attr_base_rad_dr"></span>
                        </p>
                        <p>
                            <label>Poison Damage Resistance</label>
                            <input type="hidden" name="attr_base_poison_dr"
                                value='0' />
                            <span class="input" name="attr_base_poison_dr"></span>
                        </p>
                    </div>
                    <div class="column">
                        <p>
                            <label>Defense</label>
                            <input type="hidden" name="attr_defense"
                                value='1' />
                            <span class="input" name="attr_defense"></span>
                        </p>
                        <p>
                            <label>Initiative</label>
                            <input type="hidden" name="attr_initiative"
                                value='10' />
                            <span class="input" name="attr_initiative"></span>
                        </p>
                        <p>
                            <label>Health Points</label>
                            <input type="hidden" name="attr_hp"
                                value='10' />
                            <input type="hidden" name="attr_hp_max"
                                value='10' />
                            <span class="input" name="attr_hp"></span>
                        </p>
                        <p>
                            <label>Melee Damage</label>
                            <input type="hidden" name="attr_melee_damage"
                                value='0' class="melee-damage" />
                            <span class="tip die0">None</span>
                            <span class="die die1">1</span>
                            <span class="die die2">2</span>
                            <span class="die die3">3</span>
                        </p>
                    </div>
                </div>
            </details>

            <details open="true">
                <summary><h2>6. Choose your starting equipment</h2></summary>

                <p>
                    <input type="hidden" id="origin-choice" name="attr_origin_choice"
                        class="origin-choice" value="" />
                    <label>Origin package</label>
                    <select id="brotherhood-package" class="origin-brotherhood"
                        name="attr_brotherhood_package">
                        <option value="">Choose</option>
                        <option value="steel_initiate">Brotherhood of Steel Initiate</option>
                        <option value="steel_scribe">Brotherhood of Steel Scribe</option>
                    </select>
                    <select id="mutant-package" class="origin-mutant"
                        name="attr_mutant_package">
                        <option value="">Choose</option>
                        <option value="brute">Brute</option>
                        <option value="skirmisher">Skirmisher</option>
                    </select>
                    <select id="robot-package" class="origin-robot"
                        name="attr_robot_package">
                        <option value="">Choose</option>
                        <option value="nanny">Miss Nanny</option>
                        <option value="farmhand">Mister Farmhand</option>
                        <option value="gutsy">Mister Gutsy</option>
                        <option value="handy">Mister Handy</option>
                        <option value="nurse">Nurse Handy</option>
                    </select>
                    <select id="wastelander-package" class="origin-survivor origin-ghoul"
                        name="attr_wastelander_package">
                        <option value="">Choose</option>
                        <option value="mercenary">Mercenary</option>
                        <option value="raider">Raider</option>
                        <option value="settler">Settler</option>
                        <option value="trader">Trader</option>
                        <option value="wanderer">Wanderer</option>
                    </select>
                    <select id="vault-package" class="origin-vault"
                        name="attr_vault_package">
                        <option value="">Choose</option>
                        <option value="resident">Vault-Tec Resident</option>
                        <option value="security">Vault-Tec Security</option>
                    </select>
                </p>
                <p>
                    <label>Personal Trinket</label>
                    <select id="personal-trinket"
                        name="attr_personal_trinket">
                        <option value="">Choose</option>
                        <option value="a gold pocket watch">A gold pocket watch</option>
                        <option value="a garbled holodisk">A garbled holodisk</option>
                        <option value="a brightly colored bandanna">A brightly colored bandanna</option>
                        <option value="a silver locket">A silver locket</option>
                        <option value="medal">Medal</option>
                        <option value="potted plant">Potted plant</option>
                        <option value="tickets to a pre-war event">Tickets to a pre-war event</option>
                        <option value="wedding ring">Wedding ring</option>
                        <option value="pre-war party invitation">Pre-war party invitation</option>
                        <option value="an engraved flip lighter">An engraved flip lighter</option>
                        <option value="loaded casino dice">Loaded casino dice</option>
                        <option value="id card">Id card</option>
                        <option value="cosmetics case">Cosmetics case</option>
                        <option value="musical instrument">Musical Instrument</option>
                        <option value="broken eyeglasses">Broken eyeglasses</option>
                        <option value="necklace made of junk">Necklace made of junk</option>
                        <option value="pages of an unfinished story">Pages of an unfinished story</option>
                        <option value="overdue library book">Overdue library book</option>
                        <option value="a postcard with an address">A postcard with an address</option>
                        <option value="a pre-war neck-tie">A pre-war neck-tie</option>
                    </select>
                </p>
                <h3>Tag skill items</h3>
                <p>
                    <label>Athletics</label>
                    <span class="input">Casual clothing, 1 Buffout</span>
                </p>
                <p>
                    <label>Big Guns</label>
                    <span class="input">4 +2<span class="die"></span>
                        shots of flamer fuel</span>
                </p>
                <p>
                    <label>Throwing</label>
                    <span class="input">4 +2<span class="die"></span> throwing
                        knives or 2 +1<span class="die"></span> tomahawks</span>
                </p>
            </details>

        </div>
    </div>
</div>
<!-- end creation page -->


<!-- start character page -->
<div class="character">

    <div class="row col4">
        <div class="column short logo">
            <h1>Fallout</h1>
            <div role="doc-subtitle">The Roleplaying Game</div>
        </div>
        <div class="column long">
            <label class="character-name">Character name</label>
            <input type="text" id="character-name" name="attr_character_name"
                value="" class="character-name" />
        </div>
        <div class="column short">
            <label>XP earned</label>
            <input type="number" id="xp" name="attr_xp" value="" />

            <label>XP next level</label>
            <input type="number" id="xp-next-level" name="attr_xp_next_level"
                value="" />
        </div>
        <div class="column short">
            <label class="level">Level</label>
            <input type="number" id="level" name="attr_level" value=""
                 class="level"/>
        </div>
    </div>

    <hr />

    <div class="row col7">
        <div class="column">
            <label>Strength</label>
            <input type="number" id="strength" name="attr_strength" value="5"
                min="4" max="10" />
        </div>
        <div class="column">
            <label>Perception</label>
            <input type="number" id="perception" name="attr_perception" value="5"
                min="4" max="10" />
        </div>
        <div class="column">
            <label>Endurance</label>
            <input type="number" id="endurance" name="attr_endurance" value="5"
                min="4" max="10" />
        </div>
        <div class="column">
            <label>Charisma</label>
            <input type="number" id="charisma" name="attr_charisma" value="5"
                min="4" max="10" />
        </div>
        <div class="column">
            <label>Intelligence</label>
            <input type="number" id="intelligence" name="attr_intelligence"
                value="5" min="4" max="10" />
        </div>
        <div class="column">
            <label>Agility</label>
            <input type="number" id="agility" name="attr_agility" value="5"
                min="4" max="10" />
        </div>
        <div class="column">
            <label>Luck</label>
            <input type="number" id="luck" name="attr_luck" value="5"
                min="4" max="10" />

            <label>Luck points</label>
            <input type="number" id="luck-points" name="attr_luck_points"
                value="" />
        </div>
    </div>

    <hr />

    <div class="row col2">
        <div class="column short">
            <h2>Skills</h2>
            <table class="skills">
                <tr>
                    <th>Name</th>
                    <th>Stat</th>
                    <th>Tag</th>
                    <th>Rank</th>
                </tr>
                <tr>
                    <td><label>Athletics</label></td>
                    <td>STR</td>
                    <td><input type="checkbox" id="athletics-tag"
                        name="attr_athetics_tag" value="1" /></td>
                    <td><input type="number" id="athletics" name="attr_athletics"
                        value="" /></td>
                </tr>
                <tr>
                    <td><label>Barter</label></td>
                    <td>CHA</td>
                    <td><input type="checkbox" id="barter-tag"
                        name="attr_barter_tag" value="1" /></td>
                    <td><input type="number" id="barter" name="attr_barter"
                        value="" /></td>
                </tr>
                <tr>
                    <td><label>Big Guns</label></td>
                    <td>END</td>
                    <td><input type="checkbox" id="big-guns-tag"
                        name="attr_big_guns_tag" value="1" /></td>
                    <td><input type="number" id="big-guns" name="attr_big_guns"
                        value="" /></td>
                </tr>
                <tr>
                    <td><label>Energy Weapons</label></td>
                    <td>PER</td>
                    <td><input type="checkbox" id="energy-weapons-tag"
                        name="attr_energy_weapons_tag" value="1" /></td>
                    <td><input type="number" id="energy-weapons"
                        name="attr_energy_weapons" value=""
                        /></td>
                </tr>
                <tr>
                    <td><label>Explosives</label></td>
                    <td>PER</td>
                    <td><input type="checkbox" id="explosives-tag"
                        name="attr_explosives_tag" value="1" /></td>
                    <td><input type="number" id="explosives" name="attr_explosives"
                        value="" /></td>
                </tr>
                <tr>
                    <td><label>Lockpick</label></td>
                    <td>PER</td>
                    <td><input type="checkbox" id="lockpick-tag"
                        name="attr_lockpick_tag" value="1" /></td>
                    <td><input type="number" id="lockpick" name="attr_lockpick"
                        value="" /></td>
                </tr>
                <tr>
                    <td><label>Medicine</label></td>
                    <td>INT</td>
                    <td><input type="checkbox" id="medicine-tag"
                        name="attr_medicine_tag" value="1" /></td>
                    <td><input type="number" id="medicine" name="attr_medicine"
                        value="" /></td>
                </tr>
                <tr>
                    <td><label>Melee Weapons</label></td>
                    <td>STR</td>
                    <td><input type="checkbox" id="melee-weapons-tag"
                        name="attr_melee_weapons_tag" value="1" /></td>
                    <td><input type="number" id="melee-weapons"
                        name="attr_melee_weapons" value=""
                        /></td>
                </tr>
                <tr>
                    <td><label>Pilot</label></td>
                    <td>PER</td>
                    <td><input type="checkbox" id="pilot-tag"
                        name="attr_pilot_tag" value="1" /></td>
                    <td><input type="number" id="pilot" name="attr_pilot"
                        value="" /></td>
                </tr>
                <tr>
                    <td><label>Repair</label></td>
                    <td>INT</td>
                    <td><input type="checkbox" id="repair-tag"
                        name="attr_repair_tag" value="1" /></td>
                    <td><input type="number" id="repair" name="attr_repair"
                        value="" /></td>
                </tr>
                <tr>
                    <td><label>Science</label></td>
                    <td>INT</td>
                    <td><input type="checkbox" id="science-tag"
                        name="attr_science_tag" value="1" /></td>
                    <td><input type="number" id="science" name="attr_science"
                        value="" /></td>
                </tr>
                <tr>
                    <td><label>Small Guns</label></td>
                    <td>AGI</td>
                    <td><input type="checkbox" id="small-guns-tag"
                        name="attr_small_guns_tag" value="1" /></td>
                    <td><input type="number" id="small-guns"
                        name="attr_small_guns" value="" /></td>
                </tr>
                <tr>
                    <td><label>Sneak</label></td>
                    <td>AGI</td>
                    <td><input type="checkbox" id="=sneak-tag"
                        name="attr_sneak_tag" value="1" /></td>
                    <td><input type="number" id="sneak" name="attr_sneak"
                        value="" /></td>
                </tr>
                <tr>
                    <td><label>Speech</label></td>
                    <td>CHA</td>
                    <td><input type="checkbox" id="speech-tag"
                        name="attr_speech_tag" value="1" /></td>
                    <td><input type="number" id="speech" name="attr_speech"
                        value="" /></td>
                </tr>
                <tr>
                    <td><label>Survival</label></td>
                    <td>END</td>
                    <td><input type="checkbox" id="survival-tag"
                        name="attr_survival_tag" value="1" /></td>
                    <td><input type="number" id="survival" name="attr_survival"
                        value="" /></td>
                </tr>
                <tr>
                    <td><label>Throwing</label></td>
                    <td>AGI</td>
                    <td><input type="checkbox" id="throwing-tag"
                        name="attr_throwing_tag" value="1" /></td>
                    <td><input type="number" id="throwing" name="attr_throwing"
                        value="" /></td>
                </tr>
                <tr>
                    <td><label>Unarmed</label></td>
                    <td>STR</td>
                    <td><input type="checkbox" id="unarmed-tag"
                        name="attr_unarmed_tag" value="1" /></td>
                    <td><input type="number" id="unarmed" name="attr_unarmed"
                        value="" /></td>
                </tr>
            </table>
        </div>

        <div class="column long">
            <h2>Combat</h2>

            <div class="row col3">
                <div class="column">
                    <label>Melee damage</label>
                    <input type="text" id="melee-damage" name="attr_melee_damage"
                        value="" />
                </div>
                <div class="column">
                    <label>Defense</label>
                    <input type="text" id="defense" name="attr_defense"
                        value="" />
                </div>
                <div class="column">
                    <label>Initiative</label>
                    <input type="text" id="initiative" name="attr_initiative"
                        value="" />
                </div>
            </div>

            <div class="locations">
                <div class="row col3">
                    <div class="column">
                        <label>Poison DR</label>
                        <input type="text" id="poison-dr" name="attr_poison_dr"
                            value="" />
                    </div>
                    <div class="column">
                        <table>
                            <tr>
                                <th span="4">Head (1-2)</th>
                            </tr>
                            <tr>
                                <td><label>Phys. DR</label></td>
                                <td><input type="number" id="head-pdr"
                                    name="attr_head_pdr" value=""
                                    /></td>
                                <td><label>Rad. DR</label></td>
                                <td><input type="number" id="head-rdr"
                                    name="attr_head_rdr" value=""
                                    /></td>
                            </tr>
                        </table>
                    </div>
                    <div class="column">
                        Health
                        <label>Maximum HP</label>
                        <input type="number" id="maximum-hp" name="attr_maximum_hp"
                            value="" />

                        <label>Current HP</label>
                        <input type="number" id="current-hp" name="attr_current_hp"
                            value="" />
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
<!-- end character page -->


<!-- start perks page -->
<div class="perks">
    <div class="row">
        <div class="column">
            <h2>Perks & Traits</h2>
            <table class="perks_list">
                <tr>
                    <th>Name</th>
                    <th>Rank</th>
                    <th>Effect</th>
                </tr>
                <tr>
                    <td><label>Trait</label></td>
                    <td><input type="number" id="perk-rank"
                        name="attr_perk_rank" value="" /></td>
                    <td><input type="text" id="perk-rank-effect"
                        name="attr_perk_rank_effect" value="" /></td>
                </tr>
            </table>
        </div>
    </div>
</div>
<!-- end perks page -->


<script type="text/worker">

const tablist = ["creation","character","perks"];
const attributelist = ["STRENGTH","PERCEPTION","ENDURANCE","CHARISMA",
    "INTELLIGENCE","AGILITY","LUCK"];
const skillList = ["ATHLETICS","BARTER","BIG_GUNS",
    "ENERGY_WEAPONS","EXPLOSIVES","LOCKPICK","MEDICINE","MELEE_WEAPONS",
    "PILOT","REPAIR","SCIENCE","SMALL_GUNS","SNEAK","SPEECH","SURVIVAL",
    "THROWING","UNARMED"];
const originTagList = ["ORIGIN","BROTHERHOOD_TAG"];
const tagSkillList = ["SKILLS_TAG1","SKILLS_TAG2","SKILLS_TAG3"];
const triggerList =
    attributelist.concat(skillList).concat(originTagList).concat(tagSkillList);

tablist.forEach(button => {
    on(`clicked:${button}`, function() {
        setAttrs({"tab": button});
    });
});

attributelist.forEach(attribute => {
    for (let i = 4; i < 11; i++) {
        let attribute_name = attribute.toLowerCase();
        on(`clicked:${attribute_name}${i}`, function() {
            let update = {};
            update[attribute_name] = i;
            setAttrs(update);
        });
    }
});

triggerList.forEach(trigger => {
    on(`change:${trigger}`, function(eventInfo) {
        getAttrs(triggerList, function(values) {
            let update = {};

            let strength = parseInt(values.STRENGTH)||0;
            let perception = parseInt(values.PERCEPTION)||0;
            let endurance = parseInt(values.ENDURANCE)||0;
            let intelligence = parseInt(values.INTELLIGENCE)||0;
            let agility = parseInt(values.AGILITY)||0;
            let luck = parseInt(values.LUCK)||0;

            let attribute_buy = 0;
            attributelist.forEach(attribute => {
                let points = parseInt(values[attribute])||0;
                attribute_buy += points;
            });
            let attribute_points = 40 - attribute_buy;

            let skill_buy = 0;
            skillList.forEach(skill => {
                let cost = parseInt(values[skill])||0;
                let name = skill.toLowerCase();
                let points = parseInt(values[skill])||0;
                update[`${name}_tag`] = 0;
                update[`${name}_total`] = Math.min(points, 6);
                skill_buy += cost;
            });
            let skill_points = 9 + intelligence - skill_buy;

            update["attribute_points"] = attribute_points;
            update["skill_points"] = skill_points;

            let origin = values.ORIGIN;
            let brotherhood = values.BROTHERHOOD_TAG;
            update["origin_choice"] = origin;
            switch(origin) {
                case "brotherhood":
                    if (brotherhood) {
                        let points =
                            parseInt(values[brotherhood.toUpperCase()])||0;
                        update[`${brotherhood}_tag`] = 1;
                        update[`${brotherhood}_total`] = Math.min(points + 2, 6);
                    }
                    break;
                case "ghoul":
                    update["survival_tag"] = 1;
                    update["survival_total"] = Math.min(values.SURVIVAL + 2, 6);
                    break;
                case "mutant":
                    //update["strength_max"] = 12;
                    break;
            }
            tagSkillList.forEach(tagSkill => {
                let skill = values[tagSkill];
                if (skill) {
                    let points = parseInt(values[skill.toUpperCase()])||0;
                    update[`${skill}_tag`] = 1;
                    update[`${skill}_total`] = Math.min(points + 2, 6);
                }
            });

            update["carry_weight"] = 150 + strength * 10;
            update["defense"] = agility > 8 ? 2 : 1;
            update["initiative"] = perception + agility;
            update["hp"] = endurance + luck;
            update["hp_max"] = endurance + luck;
            update["melee_damage"] =
                strength > 10 ? 3 :
                strength > 8 ? 2 :
                strength > 6 ? 1 :
                0;

            setAttrs(update);
        });
    });
});

on("change:xp sheet:opened", function() {
  getAttrs(["XP","XP_NEXT_LEVEL"], function(values) {
    let xp = parseInt(values.XP)||0;
    let level = 2;
    while ( xp > ((level * (level-1) / 2) * 100) ) {
        level++;
    }
    let xp_next_level = (level * (level-1) / 2) * 100;
    setAttrs({
      "level": level - 1,
      "xp_next_level": xp_next_level
    });
  });
});

</script>
